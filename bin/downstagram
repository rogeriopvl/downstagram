#!/usr/bin/env node

var Downstagram = require('../lib/downstagram');
var version = "0.1.1";

function showHelp(){
    console.log('Usage: downstagram [-m|--metadata] <username>');
}

function showVersion(){
    console.log('Version ' + version);
}

var args = process.argv;
args.splice(0, 2);

var keepMetadata = false;
var arg = args.shift();

do {
  if (typeof arg === 'undefined' || !arg || arg == '-h' || arg == '--help'){
      showHelp();
      process.exit(0);
  }
  else if (arg == '-v' || arg == '--version'){
      showVersion();
      process.exit(0);
  }
  else if (arg == '-m' || arg == '--metadata'){
      keepMetadata = true;
  } else {
    username = arg;
  }
} while (arg = args.shift());

var ds = new Downstagram(username, keepMetadata);
ds.start();
